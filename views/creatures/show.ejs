<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/creatures/show.css" />
<%- include('../partials/nav') %>

<main>
  <section class="title">
    <!-- <% if (creature.dragon === true) { %> 
      <img src="/images/img/icons/dragon.png" alt="dragon" class="top-dino">
    <% } else { %> 
      <% if (creature.animalClass === 'Mammal') { %> 
        <img src="/images/img/icons/smilodon.png" alt="smilodon" class="top-dino">
      <% } %>
      <% if (creature.animalClass === 'Reptile') { %> 
        <img src="/images/img/icons/tyrannosaurus.png" alt="tyrannosaurus" class="top-dino">
      <% } %>
      <% if (creature.animalClass === 'Bird') { %> 
        <img src="/images/img/icons/hawk.png" alt="hawk">
      <% } %>
      <% if (creature.animalClass === 'Insect') { %> 
        <img src="/images/img/icons/insect.png" alt="insect" class="top-dino">
      <% } %>
      <% if (creature.animalClass === 'Amphibian') { %> 
        <img src="/images/img/icons/newt.png" alt="newt" class="top-dino">
      <% } %>
    <% } %>  -->
    <h1><%= creature.name %>'s Info</h1>
    <h2>Created by <a href="/profiles/<%= creature.profile.id %> "><%= creature.profile.name %></a></h2>
  </section>
  <section>
    <table class="stats">
      <tr>
        <td><h2>Name:</h2></td>
        <td><h2><%= creature.name %></h2></td>
      </tr>
      <tr>
        <td><h2>Sci Name:</h2></td>
        <td><i><h2><%= creature.sciName %></h2></i></td>
      </tr>
      <% if (creature.dragon === true) { %> 
        <tr>
          <td><img src="/images/img/icons/dragon.png" alt="dragon"></td>
          <td><h3>Dragon</h3></td>
        </tr>
        <tr>
          <td>
            <% if (creature.element === 'Ice') { %> 
              <img src="/images/img/icons/snowflake.png" alt="snowflake">
            <% } %>
            <% if (creature.element === 'Electricity') { %> 
              <img src="/images/img/icons/lightning.png" alt="lightning-bolt">
            <% } %>
            <% if (creature.element === 'Fire') { %> 
              <img src="/images/img/icons/fire.png" alt="fire">
            <% } %>
            <% if (creature.element === 'Water') { %> 
              <img src="/images/img/icons/water.png" alt="water">
            <% } %>
            <% if (creature.element === 'Earth') { %> 
              <img src="/images/img/icons/rocks.png" alt="rocks">
            <% } %>
            <% if (creature.element === 'Psychic') { %> 
              <img src="/images/img/icons/hand.png" alt="psychic-hand">
            <% } %>
          </td>
          <td><h3><%= creature.element %> Dragon</h3></td>
        </tr>
      <% } else { %> 
        <tr>
          <td>
            <% if (creature.animalClass === 'Mammal') { %> 
              <img src="/images/img/icons/smilodon.png" alt="smilodon">
            <% } %>
            <% if (creature.animalClass === 'Reptile') { %> 
              <img src="/images/img/icons/tyrannosaurus.png" alt="tyrannosaurus">
            <% } %>
            <% if (creature.animalClass === 'Bird') { %> 
              <img src="/images/img/icons/hawk.png" alt="hawk">
            <% } %>
            <% if (creature.animalClass === 'Insect') { %> 
              <img src="/images/img/icons/insect.png" alt="insect">
            <% } %>
            <% if (creature.animalClass === 'Amphibian') { %> 
              <img src="/images/img/icons/newt.png" alt="newt">
            <% } %>
          </td>
          <td><h3><%= creature.animalClass %></h3></td>
      </tr>
      <% } %>
      <tr>
        <td><img src="/images/img/icons/ruler.png" alt="L-shaped-ruler"></td>
        <td><h3><%= creature.size %></h3></td>
      </tr>
      <tr>
        <td>
          <% if (creature.habitat === 'Forest') { %> 
            <img src="/images/img/icons/tree.png" alt="fir-trees">
          <% } %>
          <% if (creature.habitat === 'Ocean') { %> 
            <img src="/images/img/icons/wave.png" alt="ocean-wave">
          <% } %>
          <% if (creature.habitat === 'Jungle') { %> 
            <img src="/images/img/icons/jungle.png" alt="jungle-leaf">
          <% } %>
          <% if (creature.habitat === 'Grasslands') { %> 
            <img src="/images/img/icons/grass-leaves.png" alt="grass">
          <% } %>
          <% if (creature.habitat === 'Desert') { %> 
            <img src="/images/img/icons/desert.png" alt="desert">
          <% } %>
          <% if (creature.habitat === 'Tundra') { %> 
            <img src="/images/img/icons/mountain.png" alt="mountains">
          <% } %>
        </td>
        <td><h3><%= creature.habitat %> Habitat</h3></td>
      </tr>
      <tr>
        <td>
          <% if (creature.food === 'Omnivore') { %> 
            <img src="/images/img/icons/sandwich.png" alt="hamburger">
          <% } %>
          <% if (creature.food === 'Herbivore') { %> 
            <img src="/images/img/icons/leaf.png" alt="leaf">
          <% } %>
          <% if (creature.food === 'Carnivore') { %> 
            <img src="/images/img/icons/chicken-leg.png" alt="chicken-leg">
          <% } %>
        </td>
        <td><h3><%= creature.food %></h3></td>
      </tr>
      <tr>
        <td><img src="/images/img/icons/security.png" alt="shield"></td>
        <td><h3><%= creature.defense %></h3></td>
      </tr>
      <tr>
        <td><img src="/images/img/icons/footprint.png" alt="paw-print"></td>
        <td><h3><%= creature.walking %></h3></td>
      </tr>
      <tr>
        <td><img src="/images/img/icons/feather.png" alt="feather"></td>
        <td><h3><%= creature.bodyCovering %></h3></td>
      </tr>
      <tr>
        <td><img src="/images/img/icons/wings.png" alt="wings"></td>
        <td><h3><%= creature.wings ? `${creature.name} has wings` : `${creature.name} does not have wings.` %></h3></td>
      </tr>
      <tr>
        <td><img src="/images/img/icons/superhero.png" alt="superhero-flying"></td>
        <td><h3><%= creature.flight ? `${creature.name} can fly` : `${creature.name} cannot fly.` %></h3></td>
      </tr>
    </table>
    <% if (creature.profile.equals(user?.profile._id)) { %>
      <table class="profileBtns">
        <tr>
          <td>
            <form action="/creatures/new" method="GET">
              <button class="btn" type="submit">Give <%= creature.name %> a friend</button>
            </form>
          </td>
          <td>
            <form action="/creatures/<%= creature._id %>/edit" method="GET">
              <button class="btn" type="submit">Edit <%= creature.name %></button>
            </form>
          </td>
          <td>
            <form action="/creatures/<%= creature._id %>?_method=DELETE" method="POST">
              <button class="btn" type="submit">Delete <%= creature.name %></button>
            </form>
          </td>
        </tr>
      </table>
    <% } %>
  </section>
  <section class="comments">
    <table class="commentTable">
      <tr><h2>Comments</h2></tr>
      <% if (profileKilled) { %> 
        <tr>
          <td>
            <h3>You're dead. <%= creature.name %> ate you.You can't leave any more comments here.</h3>
          </td>
        </tr>
      <% } else { %> 
        <% if (creature.dragon) { %> 
          <tr>
            <td>
              <h3><%= creature.name %> is a dragon. Your comments mean nothing. They own the universe!</h3>
            </td>
          </tr>
          <tr>
            <form id="add-comment-form" action="/creatures/<%= creature._id %>/comments" method="POST">
              <td>
                <label for="dragonChoice"><%= user.profile.name %>
                  <select name="dragonChoice">
                    <option selected value="wants to leave an offering.">wants to leave an offering.</option>
                    <option value="wants to fight the dragon.">wants to fight <%= creature.name %>.</option>
                    <option value="wants to domesticate the dragon.">wants to domesticate <%= creature.name %>.</option>
                  </select>
                </label>
              </td>
              <td><button type="submit">Approach <%= creature.name %></button></td>
            </form>
          </tr>
        <% } else { %> 
          <form id="add-comment-form" action="/creatures/<%= creature._id %>/comments" method="POST">
            <tr>
              <td><div><%= user.profile.name %></div></td>
              <td>
                <label for="rating"><%= creature.name %>
                  <select name="rating">
                    <option selected value="is the king of the dinosaurs and rules This Land!">is the king of the dinosaurs and rules This Land!</option>
                    <option value="will live long and prosper.">will live long and prosper.</option>
                    <option value="is a great conversationalist, but weak DNA.">is a great conversationalist, but weak DNA.</option>
                    <option value="smells nice and looks tasty.">smells nice and looks tasty.</option>
                    <option value="will make it 10 feet and get stuck in a tar pit.">will make it 10 feet and get stuck in a tar pit.</option>
                  </select>
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <label for="content">They
                  <select name="content">
                    <option value="will own the world!">will own the world!</option>
                    <option value="will still be strong and ferocious, but half the size with a silly name.">will still be strong and ferocious, but half the size with a silly name.</option>
                    <option value="will evolve to be cute and domesticated.">will evolve to be cute and domesticated.</option>
                    <option value="will get to the ice age and freeze in a glacier.">will get to the ice age and freeze in a glacier.</option>
                    <option value="will never survive the meteor.">will never survive the meteor.</option>
                  </select>
                </label>
              </td>
            </tr>
            <tr>
              <td><button type="submit">Leave comment</button></td>
            </tr>
          </form>
        <% } %>
      <% } %> 
      <% if (creature.comments.length) { %>
        <% if (creature.dragon) { %> 
          <tr>
            <% creature.comments.forEach(function(comment) { %>
              <% if (comment.dragonChoice === "wants to leave an offering.") { %> 
                <div><a href="/profiles/<%= comment.profile.id %> "><%= comment.author %></a> left <%= creature.name %> an offering.</div>
              <% } %> 
              <% if (comment.dragonChoice === "wants to fight the dragon.") { %>
                <div><a href="/profiles/<%= comment.profile.id %> "><%= comment.author %></a> is dead becuase they tried to fight <%= creature.name %>.</div>
              <% } %> 
              <% if (comment.dragonChoice === "wants to domesticate the dragon.") { %>
                <div><a href="/profiles/<%= comment.profile.id %> "><%= comment.author %></a> is dead because they tried to domesticate <%= creature.name %>.</div>
              <% } %>
            <% }) %> 
          </tr>
        <% } else { %> 
          <tr>
            <% creature.comments.forEach(function(comment) { %>
              <div><a href="/profiles/<%= comment.profile.id %> "><%= comment.author %></a> thinks <%= creature.name %> <%= comment.rating %> They <%= comment.content %></div>
            <% }) %> 
          </tr>
        <% } %> 
      <% } else { %>
        <tr>
          <h3>No comments yet.</h3>
        </tr>
      <% } %>
    </table>
  </section>
</main>

<%- include('../partials/footer') %>